<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Assistant for Programmers</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
            background-color: #242323;
        }
        header {
            text-align: center;
            margin-bottom: 20px;
            color: white;
        }
        .task-form, .session-controls, .statistics {
            margin-bottom: 20px;
        }
        .task-list {
            list-style: none;
            padding: 0;
        }
        .task-list li {
            background-color: #615f5f81;
            padding: 20px;
            margin-bottom: 23px;
            color: #5f5e5e88;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }
        .task-list li .Task {
            flex-grow: 1;
            text-align: left;
            color: #e4e4e4;
        }
        .task-list li .button-task {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        .timer {
            font-size: 2em;
            text-align: center;
        }
        .buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        input {
            width: 50px;
            text-align: center;
        }
        .timer-display {
            font-size: 2em;
            margin: 20px 0;
            color: white;
        }
        h1 {
            color: rgba(218, 216, 216, 0.897);
        }
        p {
            position: absolute;
            width: 100px;
            height: 34px;
            left: 50px;
            top: -8px;
            color: rgb(228, 228, 228);
        }
        a {
            color: rgb(228, 228, 228);
        }
        .A1 {
            position: absolute;
            width: 100px;
            height: 34px;
            left: -15px;
            top: 5px;
        }
        .A2 {
            position: absolute;
            width: 100px;
            height: 34px;
            left: 50px;
            top: 5px;
        }
        .A3 {
            position: absolute;
            width: 100px;
            height: 34px;
            left: 120px;
            top: 5px;
        }
        label {
            color: rgb(228, 228, 228);
        }
        .Rectangle13 {
            position: absolute;
            width: 200px;
            height: 34px;
            left: 40px;
            top: 17px;
            background: rgba(217, 217, 217, 0.15);
            border-radius: 11px;
        }
        .Rectangle12 {
            position: absolute;
            width: 210px;
            height: 34px;
            right: 40px;
            top: 13px;
            background: rgba(225, 225, 225, 0.16);
            border-radius: 10px;
        }
        .Rectangle14 {
            position: absolute;
            height: 605px;
            left: 40px;
            right: 40px;
            top: 97px;
            background: linear-gradient(180deg, rgba(136, 114, 101, 0.18) 0%, rgba(0, 0, 0, 0.18) 18.82%);
            border-radius: 20px;
        }
        
        .name-task {
            position: absolute;
            width: 250px;
            height: 50px;
            left: 20px;
            top: 200px;
            background: rgba(204, 204, 204, 0.397);
            border-radius: 10px;
        }
        .Rectangle4 {
            position: absolute;
            width: 440px;
            height: 20px;
            left: 40px;
            top: 100px;
            background: #c24d2a;
            border-radius: 21px 21px 0px 0px;
        }
        .move-name {
            display: inline-block;
        }
        .button-task-add button {
            background-color: #ac4f12;
            color: #fffcfc;
            border: none;
            width: 100px; /* Ширина кнопки */
            height: 40px; /* Высота кнопки */
            border-radius: 10px;
            padding: 10px 20px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
        }

        .button-task-add button:hover {
            background-color: #25b808;
            transform: scale(1.05);
        }
        .button-task-add button:active {
            background-color: #7a3d2c;
            transform: scale(1);
        }

        .button-task button {
            background-color: #ac4f12;
            color: #fffcfc;
            border: none;
            width: 100px; /* Ширина кнопки */
            height: 40px; /* Высота кнопки */
            border-radius: 10px;
            padding: 10px 20px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
        }
        .button-task button:hover {
            background-color: #b80808;
            transform: scale(1.05);
        }
        .button-task button:active {
            background-color: #7a3d2c;
            transform: scale(1);
        }
         /* Стили для полосы прокрутки */
         .card::-webkit-scrollbar {
            width: 12px;
        }
        .card::-webkit-scrollbar-track {
            background: #615f5f81;
            border-radius: 10px;
        }
        .card::-webkit-scrollbar-thumb {
            background-color: #2e2e2e;
            border-radius: 10px;
            border: 2px solid #615f5f81;
            height: 10px; /* Высота ползунка */
        }
        .card::-webkit-scrollbar-thumb:hover {
            background-color: #474646;
        }
        .card {
            position: absolute;
            width: 400px;
            height: 400px;
            left: 40px;
            top: 100px;
            background: rgba(59, 59, 59, 0.425);
            border-radius: 20px;
            overflow-y: auto;
            padding: 20px;
        }
        .input-name {
            width: 150px; /* Ширина инпута */
            height: 20px; /* Высота инпута */
            border: 2px solid #111111; /* Толщина и цвет границы */
            border-radius: 8px; /* Радиус скругления углов */
            padding: 10px; /* Внутренние отступы */
            font-size: 16px; /* Размер шрифта */
            color: #333; /* Цвет текста */
            background-color: #414040; /* Цвет фона */
            transition: border-color 0.3s, box-shadow 0.3s; /* Плавные изменения границы и тени */
        }

        .input-name:focus {
            outline: none; /* Убираем контур фокуса */
            border-color: #6e6e6e; /* Цвет границы при фокусе */
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3); /* Тень при фокусе */
        }

        .create-container {
            position: relative; /* Обертка для формы */
            width: 300px;
            height: 100px; /* Увеличена высота, чтобы вместить форму */
            background: rgba(59, 59, 59, 0.425);
            border-radius: 20px;
            overflow-y: auto;
            padding: 20px;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column; /* Размещаем элементы по вертикали */
            align-items: center; /* Выравнивание по центру */
            justify-content: center; /* Центрирование по вертикали */
            gap: 10px; /* Расстояние между элементами */
        }

        .input-name {
            position: absolute;
            top: 20px;
            left: 40px;
            width: 250px; /* Ширина инпута */
        }

        .button-task-add {
            position: absolute;
            bottom: 20px;
            right: 28px;
        }

        .button-task-add button {
            width: 100px; /* Ширина кнопки */
        }
    </style>
</head>
<body>
<header>
    <div class="Name">
        <h1>CodeGuardian</h1>
    </div>
</header>
<div class="Rectangle13">
    <p><span th:text="${#authentication.name}">None Name</span></p>
</div>
<div class="Rectangle12">
    <a class="A1" href="/test/welcome">Home</a>
    <a class="A2" href="/test/registration">Register</a>
    <a class="A3" href="/test/logout">Logout</a>
</div>
<div class="Rectangle14">

    <div class="create-container">
        <form action="/test/addTask" method="post">
            <input class="input-name" type="text" name="text" placeholder="Введите текст" />
            <div class="button-task-add">
                <button type="submit">Добавить</button>
            </div>
        </form>
    </div>
    
    <div class="card">
        <ul class="task-list">
            <li th:each="task : ${tasks}">
                <span class="Task" th:text="${task.text}">da</span>
                <form action="/test/deleteTask" method="post" style="display:inline;">
                    <input type="hidden" name="id" th:value="${task.id}" />
                    <div class="button-task">
                        <button type="submit">Удалить</button>
                    </div>
                </form>
            </li>
        </ul>
    </div>
    <div class="Rectangle4"></div>    
        
    <h1>Таймер</h1>
    <div>
        <label>Дни: <input type="number" id="days" value="0"></label>
        <label>Часы: <input type="number" id="hours" value="0"></label>
        <label>Минуты: <input type="number" id="minutes" value="0"></label>
        <label>Секунды: <input type="number" id="seconds" value="0"></label>
    </div>
    <div class="timer-display" id="timer-display">00:00:00:00</div>
    <div>
        <button onclick="startTimer()">Установить таймер</button>
        <button onclick="stopTimer()">Остановить</button>
    </div>
</div>
<script>
    let timerInterval;

    async function startTimer() {
        const days = parseInt(document.getElementById('days').value) || 0;
        const hours = parseInt(document.getElementById('hours').value) || 0;
        const minutes = parseInt(document.getElementById('minutes').value) || 0;
        const seconds = parseInt(document.getElementById('seconds').value) || 0;

        await fetch('/test/start?days=' + days + '&hours=' + hours + '&minutes=' + minutes + '&seconds=' + seconds, { method: 'POST' });

        if (timerInterval) {
            clearInterval(timerInterval);
        }

        timerInterval = setInterval(updateTimerDisplay, 1000);
    }

    async function stopTimer() {
        await fetch('/test/stop', { method: 'POST' });
        clearInterval(timerInterval);
    }

    async function updateTimerDisplay() {
        const response = await fetch('/test/remaining');
        const remainingTime = await response.text();

        if (remainingTime <= 0) {
            clearInterval(timerInterval);
            document.getElementById('timer-display').innerHTML = '00:00:00:00';
            return;
        }

        const days = Math.floor(remainingTime / (24 * 60 * 60));
        const hours = Math.floor((remainingTime % (24 * 60 * 60)) / (60 * 60));
        const minutes = Math.floor((remainingTime % (60 * 60)) / 60);
        const seconds = remainingTime % 60;

        document.getElementById('timer-display').innerHTML =
            `${pad(days)}:${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;
    }

    function pad(number) {
        return number.toString().padStart(2, '0');
    }
</script>
</body>
</html>
